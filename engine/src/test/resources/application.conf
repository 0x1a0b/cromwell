call-caching {
  enabled = false
  lookup-docker-hash = false
}

workflow-options {
  encrypted-fields: ["refresh_token"]
  base64-encryption-key: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
  workflow-log-dir: "cromwell-test-workflow-logs"
  workflow-log-temporary: true
}

google {
  application-name = "cromwell"

  auths = [
    {
      name = "cromwell-system-account"
      scheme = "application_default"
    }
    {
      name = "cromwell-service-account"
      scheme = "service_account"
      service-account-id = "my-cromwell-account"
      pem-file = "/path/to/pem/file"
    }
    {
      name = "user-via-refresh"
      scheme = "refresh_token"
      client-id = "secret-id"
      client-secret = "secret-secret"
    }
  ]
}

backend {
  default = "Local"
  providers = [
    {
      name = "Local"
      class = "cromwell.engine.backend.local.LocalBackend"
      config {
        // Root directory where Cromwell writes job results.  This directory must be
        // visible and writeable by the Cromwell process as well as the jobs that Cromwell
        // launches.
        root: "cromwell-executions"

        // Cromwell makes a link to your input files within <root>/<workflow UUID>/workflow-inputs
        // The following are strategies used to make those links.  They are ordered.  If one fails
        // The next one is tried:
        //
        // hard-link: attempt to create a hard-link to the file
        // copy: copy the file
        // soft-link: create a symbolic link to the file
        //
        // NOTE: soft-link will be skipped for Docker jobs
        filesystems {
          local {
            localization: [
              #"hard-link", "soft-link", "copy"
              "hard-link", "copy"
            ]
          }
        }
      }
    },
    {
      name = "JES"
      class = "cromwell.engine.backend.jes.JesBackend"
      config {
        // Google project
        project = "my-cromwell-workflows"

        // Base bucket for workflow executions
        root = "gs://my-cromwell-workflows-bucket"

        // Polling for completion backs-off gradually for slower-running jobs.
        // This is the maximum polling interval (in seconds):
        maximum-polling-interval = 600

        // Optional Dockerhub Credentials. Can be used to access private docker images.
        dockerhub {
          // account = ""
          // token = ""
        }

        genomics {
          // A reference to an auth defined in the `google` stanza at the top.  This auth is used to create
          // Pipelines and manipulate auth JSONs.
          auth = "cromwell-service-account"

          // Endpoint for APIs, no reason to change this unless directed by Google.
          endpoint-url = "https://genomics.googleapis.com/"
        }

        filesystems {
          gcs {
            // A reference to a potentially different auth for manipulating files via engine functions.
            auth = "cromwell-service-account"
          }
        }
      }
    }
  ]
}
