#!/bin/bash

set -euo pipefail

echo CROMWELL_GOOGLE_PROJECT is ${CROMWELL_GOOGLE_PROJECT}
echo CROMWELL_CLOUDSQL_INSTANCE is ${CROMWELL_CLOUDSQL_INSTANCE}
echo CROMWELL_MAXIMUM_DATABASE_SIZE_TIB is ${CROMWELL_MAXIMUM_DATABASE_SIZE_TIB}
echo CROMWELL_DATABASE_FORECAST_LIMIT_MONTHS is ${CROMWELL_DATABASE_FORECAST_LIMIT_MONTHS}
if [[ ! -z ${CROMWELL_METRICS_ACCESS_TOKEN+x} ]]; then
  echo CROMWELL_METRICS_ACCESS_TOKEN has been defined
else
  echo CROMWELL_METRICS_ACCESS_TOKEN has not been defined
  exit 1
fi

pip install numpy requests python-dateutil

python db_full_check.py
